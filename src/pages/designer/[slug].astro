---
import { createClient } from '@sanity/client'

const client = createClient({
  projectId: import.meta.env.PUBLIC_SANITY_PROJECT_ID,
  dataset: import.meta.env.PUBLIC_SANITY_DATASET,
  apiVersion: '2024-01-01',
  useCdn: true,
})

const { slug } = Astro.params

const designer = await client.fetch(
  `*[_type == "designer" && slug.current == $slug][0]{
    name,
    category,
    area,
    about,
    instagram,
    website
  }`,
  { slug }
)

if (!designer) {
  return new Response('Not found', { status: 404 })
}
---

<html lang="en">
  <head>
    <title>{designer.name} | Hyderabad Labels</title>
  </head>

  <body style="max-width:900px;margin:auto;padding:40px;">
    <h1>{designer.name}</h1>

    <p><strong>{designer.category}</strong> Â· {designer.area}</p>

    <p>{designer.about}</p>

    <div style="margin-top:20px;">
      {designer.instagram && (
        <p>
          Instagram:
          <a href={designer.instagram} target="_blank">
            {designer.instagram}
          </a>
        </p>
      )}

      {designer.website && (
        <p>
          Website:
          <a href={designer.website} target="_blank">
            {designer.website}
          </a>
        </p>
      )}
    </div>
  </body>
</html>
